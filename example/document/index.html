
<!DOCTYPE html>
<html lang="zh-CN">

<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no">

<title>
  无标题
</title>
<style>
  #app {
    overflow: hidden;
    position: relative;
    height: calc(100vh - 64px);
  }

  .toolbar-wrapper {
    height: 46px;
  }

  .editor-scroller {
    box-sizing: border-box;
    position: relative;
    width: 100%;
    height: calc(100% - 46px);
    overflow-x: hidden;
    overflow-y: auto;
    padding: 2px 0 30px;
  }
</style>

<script crossorigin src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
<script crossorigin src="https://cdn.staticfile.org/es6-promise/4.1.1/es6-promise.min.js"></script>
<script src="<path>/shimo.sdk.cabinet.min.js"></script>
<script src="<path>/shimo.sdk.common.collaboration.min.js"></script>
<script src="<path>/shimo.sdk.common.min.js"></script>
<script src="<path>/shimo.sdk.document.editor.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.collaborator.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.comment.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.demo-screen.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.gallery.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.history.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.mention.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.revision.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.table-of-content.min.js"></script>
<script src="<path>/shimo.sdk.document.plugins.uploader.min.js"></script>

<body>
<div id="container" style="
  height: 100%;
  overflow: hidden;
"></div>
</body>

<script>
    window.shimoParameter = {
        token: '',
        uploadToken: '',
        uploadOrigin: '',
        uploadServer: 'oss',
        uploadMaxFileSize: 10,
        entrypoint: '',
        user: {"id":1,"email":"","name":"fghpdf","avatar":"https://assets-cdn.shimo.im/static/unmd5/default-avatar-moke.png","namePinyin":null,"status":0,"gender":null,"lastNotificationId":null,"clientUserId":"1","createdAt":"2018-12-12T06:54:20.000Z","updatedAt":"2019-03-10T18:08:18.000Z"},
        prepare: function () {
        return axios.get(window.shimoParameter.entrypoint + '/files/TnVjhyiTbwV7EtqK', {
            headers: {
            authorization: 'bearer ' + window.shimoParameter.token
            }
        }).then(function (res) {
            window.shimoParameter.file = res.data
        }) // 未部署后端建议直接使用假数据
        // file: {"head":1,"content":"[[10, \"\\n\", \"line:\\\"init\\\"\"]]","guid":"i2piw5AxT4cRrgm4"}
        }
    }

  window.shimoParameter.prepare().then(function () {
    var cabinet = new ShimoCabinet.default({
      rootDom: document.getElementById("container"),
      sdkDocument: window.shimo.sdk.document,
      sdkCommon: window.shimo.sdk.common,
      user: window.shimoParameter.user,
      entrypoint: window.shimoParameter.entrypoint,
      token: window.shimoParameter.token,
      file: window.shimoParameter.file,
      editorOptions: {
        uploadConfig: {
          origin: window.shimoParameter.uploadOrigin,
          server: window.shimoParameter.uploadServer,
          token: window.shimoParameter.uploadToken,
          maxFileSize: window.shimoParameter.uploadMaxFileSize
        },
        downloadConfig: {
          origin: window.shimoParameter.uploadOrigin + '/upload2'
        }
      },
      plugins: ["Collaboration",
            "Comment",
            "History",
            "Uploader",
            "Gallery",
            "TableOfContent",
            "Shortcut",
        ],
        onSaveStatusChange: function (status) { console.log(status); }
    });
    cabinet.renderDocument();
    // cabinet.destroyDocument(); 销毁
  })
</script>
</html>
